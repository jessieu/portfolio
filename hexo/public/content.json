{"meta":{"title":"Weilan's Blog","subtitle":"腹有诗书气自华","description":"","author":"Weilan Yu","url":"https://weilanyu.herokuapp.com/blog","root":"/blog/"},"pages":[{"title":"categories","date":"2020-09-06T23:00:00.000Z","updated":"2020-09-06T23:04:36.391Z","comments":false,"path":"categories/index.html","permalink":"https://weilanyu.herokuapp.com/blog/categories/index.html","excerpt":"","text":""},{"title":"archives","date":"2020-09-06T23:04:02.000Z","updated":"2020-09-06T23:05:06.179Z","comments":true,"path":"archives/index.html","permalink":"https://weilanyu.herokuapp.com/blog/archives/index.html","excerpt":"","text":""},{"title":"tags","date":"2020-09-06T23:05:30.000Z","updated":"2020-09-06T23:05:50.940Z","comments":true,"path":"tags/index.html","permalink":"https://weilanyu.herokuapp.com/blog/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Cyclic Reference","slug":"Cyclic-Reference","date":"2021-01-05T05:05:05.000Z","updated":"2021-01-05T05:31:51.371Z","comments":true,"path":"2021/01/04/Cyclic-Reference/","link":"","permalink":"https://weilanyu.herokuapp.com/blog/2021/01/04/Cyclic-Reference/","excerpt":"Have learned Cyclic Reference in my database introduction class, but never ran into that situation or even able to put myself into the position. Today, finally I found a bug related to it and refresh my memory about what is cyclic reference and why it’s bad.","text":"Have learned Cyclic Reference in my database introduction class, but never ran into that situation or even able to put myself into the position. Today, finally I found a bug related to it and refresh my memory about what is cyclic reference and why it’s bad. This morning, my co-worker found an error in QA said run out of heap space, which slow down our QA server and causes lots of test cases failed. And then they want me to check whether our entity classes have any cyclic reference. Don’t remember what’s that, and I do a quick lookup on it. Thus, I have to write it down in case I have to look it up again. What’s cyclic reference? On my word, an entity A contains a reference to entity B, and then entity B contains reference to A, which results in a closed loop. It increases the likelihood of error and data inconsistency. Though I am not sure whether this circular reference causes our heap error, if we don’t catch it today, it can be a nightmare someday. Reference Prevent Circular References in Database Design","categories":[],"tags":[{"name":"tech","slug":"tech","permalink":"https://weilanyu.herokuapp.com/blog/tags/tech/"}]},{"title":"Optimize Performance of MongoDB","slug":"Optimize-Performance-of-MongoDB","date":"2020-12-13T02:10:35.000Z","updated":"2021-01-05T05:41:36.454Z","comments":true,"path":"2020/12/12/Optimize-Performance-of-MongoDB/","link":"","permalink":"https://weilanyu.herokuapp.com/blog/2020/12/12/Optimize-Performance-of-MongoDB/","excerpt":"Database performance is critical in any application. MongoDB provides high performance data access, however, what can we do to fully exploit it resources for our application?","text":"Database performance is critical in any application. MongoDB provides high performance data access, however, what can we do to fully exploit it resources for our application? I have been working as backend intern for almost two months. Currently, my daily routine is to handle the admin panel’s data access. Yesterday, my co-worker from QA team handed over a weird bug to us, which said she cannot open a payment detail page from QA site because of request timeout. However, I cannot reproduce this bug because I can open it in our app with no trouble. Then our CTO checked the log of our admin panel app and found that it’s because of a sooooooo slow query to database. With out CTO’s guidance, the first time, I learned the magic of indexing. The original query tooks about 15ms, but after adding indexes in the query’s lookup fileds, it becomes 1.2ms. 10 times faster. It is sooooooooo fast. Did a quick look up on why indexing is such an amazing thing. The data structure behind indexing is a B-tree, which was originally designed for storing data on disk to take advantage of locality. It’s a self-balanced tree, but instead of storing data in the tree, we build a tree with copies of the key. Each key copy is associated with a link. The time complexity for searching, inserting, deleting, and accessing are all O(logN). Without indexing, we are basically doing the linear search with time complexity O(N). When there are large amount of data, the search speed slow down, which might cause timeout if the internet speed is not fast enough. That is also the reason why I did not catch this bug on my side.","categories":[],"tags":[{"name":"tech","slug":"tech","permalink":"https://weilanyu.herokuapp.com/blog/tags/tech/"}]},{"title":"How to Integrate Hexo Into An Exisiting App","slug":"How-to-Integrate-Hexo-Into-An-Exisiting-App","date":"2020-09-07T01:03:10.000Z","updated":"2020-09-07T03:14:04.041Z","comments":true,"path":"2020/09/06/How-to-Integrate-Hexo-Into-An-Exisiting-App/","link":"","permalink":"https://weilanyu.herokuapp.com/blog/2020/09/06/How-to-Integrate-Hexo-Into-An-Exisiting-App/","excerpt":"This is my first post. I spent a day on figuring out how to add a blog module into my portfolio and deploy it to heroku. And ta da, I did it as you are reading this post.","text":"This is my first post. I spent a day on figuring out how to add a blog module into my portfolio and deploy it to heroku. And ta da, I did it as you are reading this post. Hexo is an open-source framework built upon nodejs, and it has lots of themes avaiable to download. I found a bunch of tutorial on how to deploy it to GitHub, but rarely found one to teach you how to work with your current application. In this post, I am going to show you how to add Hexo into your nodejs app, change a theme, and deploy it to heroku. Quick StartI don’t want to overload my nodejs app’s public folder, so I create a new folder called hexo underneath the root of my application. Look like this Install Hexo in the newly created folder hexo by running the command $ npm install -g hexo-cli Configure Routes Inside app.js, add the following app.use(&#39;/blog&#39;, express.static(path.join(__dirname, &#39;hexo/public&#39;))); The path that you provide to the express.static function is relative to the directory from where you launch your node process. If you run the express app from another directory, it’s safer to use the absolute path of the directory that you want to serve. By adding this line, I am telling the express app that uses resources in hexo/public to satisfy the requests whenever the route is /blog. And other routes will continue using the static files from /public. Run the BlogCreate a public folder for the first time running. Render the markdown file in source/_post into html and copy them to public. It would simply copy the original file to public if it’s other format. $ hexo g Run the application $ npm start To serialize two commands, change the start command in package.json from &quot;scripts&quot;: &#123; &quot;start&quot;: &quot;node ./bin/www&quot; &#125; To &quot;scripts&quot;: &#123; &quot;start&quot;: &quot;(cd hexo &amp;&amp; hexo generate) &amp; node ./bin/www&quot; &#125; Change ThemeThe Hexo’s default theme is landscape. It’s clean and simple, but not my style. I love exploring new stuffes and immerse myself into beautiful design. Just find your favorite theme, and add it as subproject in hexo/themes by running $ git submodule add theme-url-in-github The theme will be cloned to current directory. To read more about submodule, please refers to the documentation Git Tools - Submodules Change the theme. Go to /hexo/_config.yaml, change the theme to package name in your themes folder. You can customize the theme. The documentation for each theme maintained by the author is well-written and will give you guidance. Local deployment should work. Deploy to Heroku Generate the static files in hexo first. This step is really important. Otherwise, hexo/public is not able to locate. Remove public in .gitigonre to allow public folder being pushed to GitHub Push to GitHub. Done!","categories":[],"tags":[{"name":"tech","slug":"tech","permalink":"https://weilanyu.herokuapp.com/blog/tags/tech/"}]},{"title":"Hello World","slug":"hello-world","date":"2020-09-06T19:00:41.255Z","updated":"2020-09-06T23:19:44.770Z","comments":true,"path":"2020/09/06/hello-world/","link":"","permalink":"https://weilanyu.herokuapp.com/blog/2020/09/06/hello-world/","excerpt":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post$ hexo new &quot;My New Post&quot;","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post$ hexo new &quot;My New Post&quot; More info: Writing Run server$ hexo server More info: Server Generate static files$ hexo generate More info: Generating Deploy to remote sites$ hexo deploy More info: Deployment","categories":[{"name":"miscellaneous","slug":"miscellaneous","permalink":"https://weilanyu.herokuapp.com/blog/categories/miscellaneous/"}],"tags":[]}],"categories":[{"name":"miscellaneous","slug":"miscellaneous","permalink":"https://weilanyu.herokuapp.com/blog/categories/miscellaneous/"}],"tags":[{"name":"tech","slug":"tech","permalink":"https://weilanyu.herokuapp.com/blog/tags/tech/"}]}